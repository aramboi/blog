<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Angel Ramboi, coder, gamer, geek">

        <link rel="alternate"  href="http://localhost:8080/feeds/all.atom.xml" type="application/atom+xml" title="Angel Ramboi Full Atom Feed"/>

        <title>Install Ubuntu side by side with Windows 10 on an Alienware 13 laptop // Angel Ramboi // coder, gamer, geek</title>

    <link href="/images/alt-favicon.png" rel="icon">

    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.3.0/pure-min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.1.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://altshiftkill.com/theme/css/pure.css">
    <link rel="stylesheet" href="https://altshiftkill.com/theme/css/pygments.css">

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/fitvids/1.0.1/jquery.fitvids.min.js"></script>
    <script>
        $(document).ready(function(){
            $(".content").fitVids();
        });
    </script>
</head>

<body>
    <div class="pure-g-r" id="layout">
        <div class="sidebar pure-u">
            <div class="cover-img" style="background-image: url('/images/alt-bg.png')">
                <div class="cover-body">
                    <header class="header">
                        <hgroup>
                            <a href="https://altshiftkill.com"><img class="avatar" src="/images/me.jpg"><a>
                            <h1 class="brand-main"><a href="https://altshiftkill.com">Angel Ramboi</a></h1>
                            <p class="tagline">coder, gamer, geek</p>
                                <p class="links"><a href="/archives.html">Archive</a></p>
                                <p class="social">
                                    <a href="https://twitter.com/AngelRamboi">
                                        <i class="fa fa-twitter fa-3x"></i>
                                    </a>
                                    <a href="https://github.com/aramboi">
                                        <i class="fa fa-github fa-3x"></i>
                                    </a>
                                    <a href="http://altshiftkill.com/feeds/all.atom.xml">
                                        <i class="fa fa-rss fa-3x"></i>
                                    </a>
                                </p>
                        </hgroup>
                    </header>
                </div>
            </div>
        </div>
    <div class="pure-u">
        <div class="content">
            <section class="post">
                <header class="post-header">
                    <h1>Install Ubuntu side by side with Windows 10 on an Alienware 13 laptop</h1>
                        <p class="post-meta">
                            // under                                 <a class="post-category" href="https://altshiftkill.com/tag/ubuntu.html">ubuntu</a>
                                <a class="post-category" href="https://altshiftkill.com/tag/alienware.html">alienware</a>
                        </p>
                </header>
            </section>
            <p>The Alienware 13 is probably the best compact gaming rig out there, so as you'd expect the Linux the support is underwhelming, to say the least. This setup assumes we want to keep the Windows 10 install and have a dual-boot system.</p>
<h3>Windows preparations</h3>
<p>First we need to shrink the main Windows partition (a guide for that can be found <a href="http://www.howtogeek.com/howto/windows-vista/resize-a-partition-for-free-in-windows-vista/">here</a> on <em>How-to Geek</em>). By default Dell makes some extra partitions for the recovery and the Windows installation kit. Also, Windows 10 adds its own two extra system partitions, so be careful not to mess those up. I did a backup of the Dell ones and deleted them, but you can keep them, it should be the same either way.</p>
<p>I was unable to to get enough space for Ubuntu without disabling the <code>Page File</code> and <code>System Restore</code>, shrink partition and enable them back again, but you might not have to.</p>
<p>I also disabled the <code>fastboot</code> feature provided since Windows 8. What this does is putting the computer in hibernation instead of completely turning it off when the user issues a shut down from the <code>Power</code> menu. This allows for faster startup times when turning the laptop back on, but it can interfere with restarting when you are trying to reboot to get into Ubuntu instead.</p>
<h3>Ubuntu install</h3>
<p>Make sure you have a wired network connection before starting this, otherwise you won't be able to get the updates for the video and wi-fi cards.</p>
<p>When you get to the install menu you need to change the boot sequence a bit. With <code>Install Ubuntu</code> selected, press <code>e</code> and add <code>nomodeset</code> just after <code>splash</code>. Then <code>Ctrl+x</code> or <code>F10</code> to continue booting. You should be able to install the system as you normally would.</p>
<h3>Video drivers</h3>
<p>I was unable to boot properly into Ubuntu after install and it was relatively hard to pinpoint the issue because the error messages would appear only briefly on screen. After some research I concluded that the video card was the culprit and had to install the proprietary drivers to get things working.</p>
<p>To do that boot into recovery mode by selecting <code>Advanced options for Ubuntu</code> and then the second option in the boot menu, the one that has appended <code>recovery menu</code> to the latest kernel version string. You will be presented with several options as seen below:</p>
<p><img alt="Ubuntu recovery menu" src="/images/2015/ubuntu-recovery-mode-menu.png" title="Ubuntu recovery menu" /></p>
<p>Choose the <code>Enable networking</code> option and press <code>OK</code>. After that is finished choose the option to <code>Drop into root shell prompt</code>. In the shell do:</p>
<div class="highlight"><pre><span></span>$ ubuntu-drivers <span class="nv">devices</span>
<span class="o">==</span> /sys/devices/pci0000:00/0000:00:1c.4/0000:03:00.0 <span class="o">==</span>
model    : GM107M <span class="o">[</span>GeForce GTX 960M<span class="o">]</span>
modalias : pci:v000010DEd0000139Bsv00001028sd000006E1bc03sc02i00
vendor   : NVIDIA Corporation
driver   : xserver-xorg-video-nouveau - distro free <span class="nb">builtin</span>
driver   : nvidia-352-updates - distro non-free
driver   : nvidia-352 - distro non-free recommended

$ apt-get install nvidia-352  <span class="c1"># the number must match the version you got above</span>
$ nvidia-xconfig
$ reboot
</pre></div>


<p>There is a good part though to using proprietary driver, you can choose the video chipset the OS uses, either nVidia or Intel (which promises longer battery life). The not so cool part is that this switch does not happen on the fly and you have to log out and log in again to apply the change.</p>
<h3>Touchpad</h3>
<p>Getting the Synaptic touchpad to work was a lucky find. After doing a lot of messing around with <code>xinput</code> and having little success, I found a seemingly unrelated post that suggested blacklisting the <code>i2c_hid</code> kernel module:</p>
<div class="highlight"><pre><span></span>$ sudo <span class="nb">echo</span> <span class="s2">&quot;blacklist i2c_hid&quot;</span> &gt;&gt; /etc/modprobe.d/blacklist.conf
$ sudo reboot
</pre></div>


<h3>Wi-fi</h3>
<h6><strong>UPDATE:</strong> This should work with Ubuntu 15.10 out of the box after install and system updates. They seem to have added the patch around 6th of December 2015.</h6>
<p>The wi-fi was the nastiest part, and it seems to be a recurring theme when it comes to installing Linux on a more <em>bleeding edge</em> laptop. My initial research found this bug report: "<a href="https://bugs.launchpad.net/ubuntu/+source/linux/+bug/1383184">Atheros Qualcomm Killer N1525 Wireless-AC [168c:003e] is not supported</a>" and it seemed like the chances were pretty slim on getting this working with 15.04 which had kernel 3.19 still.</p>
<p>For a while the solution was a patch from kernel upstream, but it was pretty ugly. Then a <code>dkms</code> package was released, namely <code>ath10k-dkms_1.0_all.deb</code> and then an updated version <code>ath10k-dkms_1.1_all.deb</code> (can't find any reliable download links any more, even though this might be the only way to get the wi-fi working in 15.04).</p>
<p>The solution should have came with the release of Ubuntu 15.10. Not only it is the most stable October version in quite a while, it also comes with kernel 4.2 which in theory should have included the binaries for the Killer NIC chipset, sadly it did not. The bug report description said it will be available via an <code>apt-get update</code> within a week, but I can't figure out when that edit was made to the ticket (they should have made a new post). So I ran out of patience and just downloaded the binaries from <a href="https://git.kernel.org/cgit/linux/kernel/git/firmware/linux-firmware.git/plain/ath10k/QCA6174">kernel.org</a> and copied them over into <code>/lib/firmware/ath10k/</code>. Rebooted and everything works as it should.</p>
<h3>AlienFX</h3>
<p>You are out of luck here, friend! Pressing <code>Fn+F12</code> does not turn off/on the keyboard lighting and the only lead I found on changing the light configuration was this Python package on <a href="https://github.com/ashwinm76/alienfx">github</a>, but is almost 2 years old and targeted at the M14xR1 model (did not test it on my machine).</p>
<p>The good news is that customizations done in Windows to any of the LEDs carries out to Ubuntu also.</p>
<h3>Conclusion</h3>
<p>Alienware 13 is a great and powerful gaming laptop, and with a bit of work it behaves really well under Linux also. I played the native Steam version of "Bioshock Infinite" on high settings with very good frame rate under Ubuntu 15.10, so I am very happy with how things turned up.</p>
<p>PS: For this blog post I wanted to do also a recording with "Bioshock Infinite" running native on Ubuntu, but the frame rates while recording were horrendous and lowering the settings would not have done the game justice.</p>
            <a href="#" class="go-top">Go Top</a>
    <div class="comments">
        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = "altshiftkill"; // required: replace example with your forum shortname

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>
<footer class="footer">
    <p>&copy; Angel Ramboi &ndash;
        Built with <a href="https://github.com/PurePelicanTheme/pure-single">Pure Theme</a>
        for <a href="http://blog.getpelican.com/">Pelican</a>
    </p>
</footer>        </div>
    </div>
    </div>
    <script>
        var $top = $('.go-top');

        // Show or hide the sticky footer button
        $(window).scroll(function() {
            if ($(this).scrollTop() > 200) {
                $top.fadeIn(200);
            } else {
                $top.fadeOut(200);
            }
        });

        // Animate the scroll to top
        $top.click(function(event) {
            event.preventDefault();
            $('html, body').animate({scrollTop: 0}, 300);
        })

        // Makes sure that the href="#" attached to the <a> elements
        // don't scroll you back up the page.
        $('body').on('click', 'a[href="#"]', function(event) {
            event.preventDefault();
        });
    </script>

<!-- Piwik -->
<script type="text/javascript">
  var _paq = _paq || [];
  _paq.push(["trackPageView"]);
  _paq.push(["enableLinkTracking"]);

  (function() {
    var u=(("https:" == document.location.protocol) ? "https" : "http") + "://altshiftkill.com/pwk/";
    _paq.push(["setTrackerUrl", u+"piwik.php"]);
    _paq.push(["setSiteId", "1"]);
    var d=document, g=d.createElement("script"), s=d.getElementsByTagName("script")[0]; g.type="text/javascript";
    g.defer=true; g.async=true; g.src=u+"piwik.js"; s.parentNode.insertBefore(g,s);
  })();
</script>
<noscript>
 <img src="http://altshiftkill.com/pwk/piwik.php?idsite=1&amp;rec=1" style="border:0" alt="" />
</noscript>
<!-- End Piwik Code -->
</body>
</html>